rules_version: "v1"
seed: 42
initial_equity: 10000.0

execution:
  order_fill: next_bar_open
  latency_seconds: 0
  execution_delay_seconds: 2
  fee_model: taker
  taker_fee_bps: 4.0
  maker_fee_bps: 1.0
  max_candle_volume_participation: 0.02
  participation_mode: reject
  max_position_notional_usd: 250000
  min_notional_usd: 10.0
  qty_step: 0.0001
  price_tick_size: 0.1
  delay_bps_per_second: 0.1
  delay_bps_per_vol_per_second: 4.0
  slippage:
    bps_base: 1.5
    bps_per_vol: 15.0
    vol_proxy: candle_range

position_sizing:
  leverage: 1.0
  risk_fraction: 1.0

cv:
  mode: walk_forward
  train_bars: 2160
  test_bars: 720
  step_bars: 720
  purge_bars: 24
  embargo_bars: 24

candidate_generation:
  default_count: 300
  smoke_count: 5
  families:
    - liquidation_reversal
    - meanrev_vwap
    - momentum_breakout
    - trend_ma_regime
    - volatility_expansion

windowing:
  enabled: true
  optimization:
    start_ts_utc: "2021-03-01T04:00:00Z"
    end_ts_utc: "2024-12-31T23:59:00Z"
  out_of_sample:
    start_ts_utc: "2025-01-01T04:00:00Z"
    end_ts_utc: "2026-02-18T23:59:00Z"
  robustness:
    start_ts_utc: null
    end_ts_utc: null

metrics:
  annualization_bars_5m: 105120
  annualization_bars_1h: 8760

gates:
  min_trades: 20
  trade_count_mode: fold_total
  positive_fold_use_active_only: true
  max_drawdown_pct: 0.40
  min_positive_fold_ratio: 0.40
  max_bootstrap_prob_negative: 0.75
  min_return_skewness: -2.0
  max_return_excess_kurtosis: 14.0
  min_win_loss_ratio: 0.5
  enable_correlation_gate: true
  max_return_correlation: 0.75
  correlation_use_absolute: true
  correlation_min_points: 100
  require_positive_oos_window: false
  min_oos_trades: 2
  require_nonnegative_robustness_window: false
  require_cost_robustness: true
  require_latency_robustness: false
  require_parameter_perturbation: false
  cost_robustness_levels:
    - 1.25
  latency_delay_seconds:
    - 2
  parameter_perturbation_step: 1

scoring:
  weight_sharpe: 0.40
  weight_sortino: 0.25
  weight_return: 0.20
  weight_drawdown: 0.15
  complexity_penalty_per_param: 0.02
  turnover_penalty: 0.001
  negative_skew_penalty: 0.1
  kurtosis_penalty: 0.02

reporting:
  top_overall: 10
  top_per_family: 3

llm_generation:
  prompt:
    path: research/generator/prompts/master_btc_perp_generator_prompt_v1.md
    version: master_btc_perp_generator_prompt_v1
  api:
    base_url: https://openrouter.ai/api/v1
    timeout_seconds: 60
    max_retries: 3
    temperature: 0.0
    top_p: 1.0
  model_lanes:
    minimax:
      model_id: minimax/minimax-m2.5
      calls: 2
    kimi:
      model_id: moonshotai/kimi-k2.5
      calls: 2
    deepseek:
      model_id: deepseek/deepseek-v3.2
      calls: 2
    grok_generate:
      model_id: x-ai/grok-4.1-fast
      calls: 4
  synthesis:
    model_id: x-ai/grok-4.1-fast
  fail_closed_on_missing_grok: true
  limits:
    max_total_calls: 12
    max_completion_tokens_per_call: 1800
    max_total_completion_tokens: 22000
  generation:
    top_n_final: 12
    strategies_per_call: 8
    diversity_param_overlap_max: 0.70
  improvement_round:
    enabled: false
    model_id: deepseek/deepseek-v3.2
    calls: 1
  pricing:
    default_input_per_1k: 0.0
    default_output_per_1k: 0.0
